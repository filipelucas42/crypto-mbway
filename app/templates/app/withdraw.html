{% extends 'app/layouts/base.html' %} 
{% block title %} 
Withdraw Crypto 
{% endblock %} 
{% block content %}
<div class="text-center">
  <h2 class="fw-bold">Withdraw Crypto</h2>

  <div class="card my-4 p-4 text-center">
    <img
      src="https://cryptologos.cc/logos/solana-sol-logo.png?v=023"
      width="150"
      class="img-fluid rounded"
    />
    <p class="mt-3 text-white">Sol | USDC</p>

    <!-- Single Input Field for Withdrawal Amount -->
    <form method="POST">
      {% csrf_token %}
      <input
        type="number"
        id="withdrawAmount"
        class="form-control text-center text-white bg-dark border-0 display-4 fw-bold my-3"
        placeholder="Enter amount"
        required
      />

      <!-- Dynamic balance fetched from API -->
      <p class="text-muted">
        Balance: <span id="cryptoBalance">Loading...</span> Sol
      </p>

      <button type="submit" class="btn btn-custom btn-green w-100">Next</button>
    </form>
  </div>
</div>

<!-- JavaScript to Fetch Balance from API -->
<script>
  document.addEventListener("DOMContentLoaded", function () {
    fetch("/api/get_balance/") // Replace with your actual API endpoint
      .then((response) => response.json())
      .then((data) => {
        document.getElementById("cryptoBalance").textContent = data.balance;
      })
      .catch((error) => {
        console.error("Error fetching balance:", error);
        document.getElementById("cryptoBalance").textContent =
          "Error loading balance";
      });
  });
</script>
{% endblock %}
